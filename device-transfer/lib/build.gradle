plugins {
    id 'signal-library'
}

android {
    namespace 'org.signal.devicetransfer'
}

tasks.withType(Test).configureEach {
    retry {
        maxRetries.set(3)
        failOnPassedAfterRetry.set(true)
    }
}

dependencies {
    implementation project(':core-util')
    implementation libs.libsignal.android
    api libs.greenrobot.eventbus

    testImplementation (testLibs.robolectric.robolectric) {
        exclude group: 'com.google.protobuf', module: 'protobuf-java'
    }
    testImplementation testLibs.robolectric.shadows.multidex
    testImplementation testLibs.hamcrest.hamcrest

    testImplementation(testFixtures(project(":libsignal-service")))
}
